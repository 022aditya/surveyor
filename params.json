{"name":"Surveyor","body":"# Surveys On Rails\r\n\r\nSurveyor is a ruby gem and developer tool that brings surveys into Rails applications. Surveys are written in the Surveyor DSL (Domain Specific Language). Before Rails 2.3, it was implemented as a Rails Engine. It also existed previously as a plugin. Today it is a gem only.\r\n\r\n## Why you might want to use Surveyor\r\n\r\nIf your Rails app needs to asks users questions as part of a survey, quiz, or questionnaire then you should consider using Surveyor. This gem was designed to deliver clinical research surveys to large populations, but it can be used for any type of survey.\r\n\r\nThe Surveyor DSL defines questions, answers, question groups, survey sections, dependencies (e.g. if response to question 4 is A, then show question 5), and validations. Answers are the options available for each question - user input is called \"responses\" and are grouped into \"response sets\". A DSL makes it significantly easier to import long surveys (no more click/copy/paste). It also enables non-programmers to write out, edit, re-edit... any number of surveys.\r\n\r\n## DSL example\r\n\r\nThe Surveyor DSL supports a wide range of question types (too many to list here) and complex dependency logic. Here are the first few questions of the \"kitchen sink\" survey which should give you and idea of how it works. The full example with all the types of questions available if you follow the installation instructions below.\r\n\r\n    survey \"Kitchen Sink survey\" do\r\n\r\n      section \"Basic questions\" do\r\n        # A label is a question that accepts no answers\r\n        label \"These questions are examples of the basic supported input types\"\r\n\r\n        # A basic question with radio buttons\r\n        question_1 \"What is your favorite color?\", :pick => :one\r\n        answer \"red\"\r\n        answer \"blue\"\r\n        answer \"green\"\r\n        answer \"yellow\"\r\n        answer :other\r\n\r\n        # A basic question with checkboxes\r\n        # \"question\" and \"answer\" may be abbreviated as \"q\" and \"a\"\r\n        q_2 \"Choose the colors you don't like\", :pick => :any\r\n        a_1 \"red\"\r\n        a_2 \"blue\"\r\n        a_3 \"green\"\r\n        a_4 \"yellow\"\r\n        a :omit\r\n\r\n        # A dependent question, with conditions and rule to logically join them\r\n        # the question's reference identifier is \"2a\", and the answer's reference_identifier is \"1\"\r\n        # question reference identifiers used in conditions need to be unique on a survey for the lookups to work\r\n        q_2a \"Please explain why you don't like this color?\"\r\n        a_1 \"explanation\", :text\r\n        dependency :rule => \"A or B or C or D\"\r\n        condition_A :q_2, \"==\", :a_1\r\n        condition_B :q_2, \"==\", :a_2\r\n        condition_C :q_2, \"==\", :a_3\r\n        condition_D :q_2, \"==\", :a_4\r\n\r\n        # ... other question, sections and such. See surveys/kitchen_sink_survey.rb for more.\r\n     end\r\n\r\n    end\r\n\r\nThe first question is \"pick one\" (radio buttons) with \"other\". The second question is \"pick any\" (checkboxes) with the option to \"omit\". It also features a dependency with a follow up question. Notice the dependency rule is defined as a string. We support complex dependency such as \"A and (B or C) and D\" or \"A or ((B and C) or D)\". The conditions are evaluated separately using the operators \"==\",\"!=\",\"<>\", \">=\",\"<\" the substituted by letter into to the dependency rule and evaluated.\r\n\r\n# Installation\r\n\r\n1. Add surveyor to your Gemfile:\r\n\r\n    gem \"surveyor\"\r\n\r\nThen run:\r\n\r\n    bundle install\r\n\r\n2. Generate assets, run migrations:\r\n\r\n    script/rails generate surveyor:install\r\n    rake db:migrate\r\n\r\n3. Try out the \"kitchen sink\" survey. The rake task above generates surveys from our custom survey DSL (a good format for end users and stakeholders).\r\n\r\n    rake surveyor FILE=surveys/kitchen_sink_survey.rb\r\n\r\n4. Start up your app and visit http://localhost:3000/surveys\r\n\r\nTry taking the survey and compare it to the contents of the DSL file kitchen\\_sink\\_survey.rb. See how the DSL maps to what you see.\r\n\r\nThere are two other useful rake tasks:\r\n\r\n* `surveyor:remove` removes all unused surveys.\r\n* `rake surveyor:unparse` exports a survey from the application into a\r\n  file in the surveyor DSL.\r\n\r\n# Customizing surveyor\r\n\r\nSurveyor's controller, models, and views may be customized via classes in your app/models, app/helpers and app/controllers directories. To generate a sample custom controller and layout, run:\r\n\r\n`script/rails generate surveyor:custom`\r\n\r\nand read surveys/EXTENDING\\_SURVEYOR\r\n\r\n# PDF support\r\n\r\n* Add the following lines to your Gemfile:\r\n\r\n<pre>\r\n\tgem 'pdfkit'\r\n\tgem 'wkhtmltopdf'\r\n</pre>\r\n\r\nor on OSX:\r\n\r\n<pre>\r\n\tgem 'pdfkit'\r\n\tgem 'wkhtmltopdf-binary'\r\n</pre>\r\n\r\n* Add the following to your application.rb:\r\n\r\n<pre>\r\n\tconfig.middleware.use PDFKit::Middleware\r\n</pre>\r\n\r\n* Create links with :format => 'pdf' in them, for example:\r\n\r\n<pre>\r\n\t%li= link_to \"PDF\", view_my_survey_path(:survey_code => response_set.survey.access_code, :response_set_code => response_set.access_code, :format => 'pdf')\r\n</pre>\r\n\r\n# Requirements\r\n\r\nSurveyor depends on:\r\n\r\n* Ruby (1.8.7 - 1.9.2)\r\n* Rails 3.0-3.1\r\n* HAML\r\n* SASS\r\n* fastercsv (or CSV for ruby 1.9) for csv exports\r\n* formtastic\r\n* UUID\r\n\r\nSpecific versions of the gem dependencies are listed in the gemspec.\r\n\r\n# Contributing, testing\r\n\r\nTo work on the code, fork this github project. Install [bundler][] if\r\nyou don't have it, then run\r\n\r\n    $ bundle update\r\n\r\nto install all the necessary gems. Then\r\n\r\n    $ bundle exec rake testbed\r\n\r\nto generate a test app in `testbed`. Now you can run\r\n\r\n    $ bundle exec rake spec\r\n\r\nto run the specs and\r\n\r\n    $ bundle exec rake cucumber\r\n\r\nto run the features and start writing tests!\r\n\r\n[bundler]: http://gembundler.com/\r\n\r\nCopyright (c) 2008-2011 Brian Chamberlain and Mark Yoon, released under the MIT license\r\n","tagline":"Surveyor is a Rails gem that lets you easily design surveys, questionnares, quizes, etc... and add them to your app.  (See Readme for more information)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}