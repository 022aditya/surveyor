- case question.renderer
- when :dropdown
  - div_for question, :class => question.dep_class do
    .number= next_number unless question.dependent?
    %fieldset
      %legend{:style => "display:inline;"}
        .text= question.text
        %span.help= question.help_text
        = hidden_field_tag("responses[#{question.id}][question_id]", question.id)
      %ol.answers
        %li.answer
          - options = question.answers.collect{|a| "<option #{ (response_set.response_for(question.id, a.id).selected?)? "selected='selected'" : nil } value ='#{a.id}'>#{a.text}</option>" }
          = select_tag("responses[#{question.id}][answer_id]", ["<option value=''>Select one...</option>"].concat(options))
- when :image
  .image
    %img{:src => image_path(question.text)}
- when :inline
  - div_for question, :class => question.dep_class do
    .number= next_number unless question.dependent?
    %fieldset
      %legend
        .text= question.text
        %span.help= question.help_text
        = hidden_field_tag("responses[#{question.id}][question_id]", question.id)
      %ol.answers_inline
        - question.answers.each do |answer|
          %li.answer 
            =render(:partial => "/partials/answer", :locals => {:answer => answer, :response_obj => @response_set.response_for(question.id, answer.id)})
- when :label
  - div_for question, :class => "label #{question.dep_class}" do
    .text= question.text
    %span.help= question.help_text
- when :slider
  %script{:type => "text/javascript"}
    $(function(){
    //demo 1
    ="$('#slider_#{question.id}').accessibleUISlider({width: 400, labels:#{question.answers.size} }).hide();"
    });
  - div_for question, :class => question.dep_class do
    .number= next_number unless question.dependent?
    %fieldset
      %legend{:style => "display:inline;"}
        .text= question.text
        %span.help= question.help_text
        = hidden_field_tag("responses[#{question.id}][question_id]", question.id)
      %ol.answers
        %li.answer
          - options= question.answers.collect{|a| "<option #{ (response_set.response_for(question.id, a.id).selected?)? "selected='selected'" : nil } value ='#{a.id}'>#{a.text}</option>" }
          = select_tag("responses[#{question.id}][answer_id]", options, {:id => "slider_#{question.id}"})
- when :grid_default
  - reset_cycle("column_highlight")
  %tr
    %td.question_prefix
      - div_for question do
        %span.text= split_text(question.text)[:prefix]
        %span.help= question.help_text
        = hidden_field_tag("responses[#{question.id}][question_id]", question.id)
    - question.answers.each do |answer|
      %td{:class => "#{cycle("column_highlight", "", :name => "column_highlight")}"}
        .answer= render(:partial => "/partials/answer", :locals => {:answer => answer, :response_obj => response_set.response_for(question.id, answer.id)})
    %td.question_postfix
      - div_for question, :class => question.dep_class do
        %span.text= split_text(question.text)[:postfix]
- when :grid_dropdown
  - reset_cycle("column_highlight")
  %tr
    %td.question_prefix
      - div_for question do
        %span.text= split_text(question.text)[:prefix]
        %span.help= question.help_text
        = hidden_field_tag("responses[#{question.id}][question_id]", question.id)
    - question.answers.each do |answer|
      %td{:class => "#{cycle("column_highlight", "", :name => "column_highlight")}"}
        .answer 
          - options= question.answers.collect{|a| "<option #{ (response_set.response_for(question.id, a.id).selected?)? "selected='selected'" : nil } value ='#{a.id}'>#{a.text}</option>" }
          = select_tag("responses[#{question.id}][answer_id]", ["<option value=''>Select one...</option>"].concat(options))
    %td.question_postfix
      .question
        %span.text= split_text(question.text)[:postfix]
- when :group_default
  - div_for question do
    %span.text= question.text
    %span.help= question.help_text
    = hidden_field_tag("responses[#{question.id}][question_id]", question.id)
    %ol.answers
      - question.answers.each do |answer|
        %li.answer= render(:partial => "/partials/answer", :locals => {:answer => answer, :response_obj => response_set.response_for(question.id, answer.id), :hide_label => true})
- when :group_dropdown
  - div_for question do
    %span.text= question.text
    %span.help= question.help_text
    = hidden_field_tag("responses[#{question.id}][question_id]", question.id)
    - options= question.answers.collect{|a| "<option #{ (response_set.response_for(question.id, a.id).selected?)? "selected='selected'" : nil } value ='#{a.id}'>#{a.text}</option>" }
    = select_tag("responses[#{question.id}][answer_id]", ["<option>Select one...</option>"].concat(options))
- when :repeater_default
  - disabled ||= false
  - div_for question, :class => (disabled ? 'disabled' : 'enabled') do
    %span.text= question.text
    %span.help= question.help_text
    = hidden_field_tag("response_groups[#{question.id}][#{response_group}][response_group]", response_group)
    = hidden_field_tag("response_groups[#{question.id}][#{response_group}][question_id]", question.id)
    %ol.answers
      - question.answers.each do |answer|
        %li.answer 
          =render(:partial => "/partials/answer", :locals => {:answer => answer, :response_obj => response_set.response_for(question.id, answer.id, response_group),:response_group => response_group, :hide_label => true, :disabled => disabled})
- when :repeater_dropdown
  - disabled ||= false
  - div_for question, :class => (disabled ? 'disabled' : 'enabled') do
    %span.text= question.text
    %span.help= question.help_text
    = hidden_field_tag("response_groups[#{question.id}][#{response_group}][response_group]", response_group)
    = hidden_field_tag("response_groups[#{question.id}][#{response_group}][question_id]", question.id)
    - options= question.answers.collect{|a| "<option #{ (response_set.response_for(question.id, a.id, response_group).selected?)? "selected='selected'" : nil } value ='#{a.id}'>#{a.text}</option>" }
    = select_tag("response_groups[#{question.id}][#{response_group}][answer_id]", ["<option value=''>Select one...</option>"].concat(options), :disabled => disabled)
- else
  - div_for question, :class => question.dep_class(response_set) do
    .number= next_number unless question.dependent?
    %fieldset
      %legend
        %span.text= question.text
        %span.help= question.help_text
      = hidden_field_tag("responses[#{question.id}][question_id]", question.id)
      %ol.answers
        - question.answers.each do |answer|
          - content_tag_for :li, answer do
            = render(:partial => "/partials/answer", :locals => {:answer => answer, :response_obj => @response_set.response_for(question.id, answer.id), :hide_label => answer.hide_label})